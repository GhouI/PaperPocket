{"version":3,"names":["initVocoder","getFormattedAudioCompletion","decodeAudioTokens","releaseVocoder","getTTSType","isVocoderEnabled","TTSError","Error","constructor","message","code","contextId","name","CactusTTS","isInitialized","isReleased","context","vocoderPath","init","vocoderModelPath","id","instance","ttsType","error","generate","textToSpeak","speaker","options","validateState","validateInputs","speakerConfig","JSON","stringify","config","startTime","Date","now","formatted_prompt","tokenizeResult","tokenize","tokens","length","audioResult","endTime","metadata","duration","sampleRate","format","channels","isVocoderReady","getContextId","getVocoderPath","isReady","createSpeaker","trim","release"],"sourceRoot":"../../src","sources":["tts.ts"],"mappings":"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","ignoreList":[]}
