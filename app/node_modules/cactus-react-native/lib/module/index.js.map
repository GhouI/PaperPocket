{"version":3,"names":["NativeEventEmitter","DeviceEventEmitter","Platform","Cactus","formatChat","parseAndExecuteTool","Telemetry","Tools","EVENT_ON_INIT_CONTEXT_PROGRESS","EVENT_ON_TOKEN","EVENT_ON_NATIVE_LOG","EventEmitter","OS","logListeners","addListener","evt","forEach","listener","level","text","toggleNativeLog","catch","getJsonSchema","responseFormat","type","json_schema","schema","telemetryParams","n_gpu_layers","n_ctx","model","LlamaContext","gpu","reasonNoGPU","constructor","contextId","id","loadSession","filepath","path","startsWith","slice","saveSession","options","tokenSize","isLlamaChatSupported","chatTemplates","llamaChat","isJinjaSupported","minja","toolUse","default","getFormattedChat","messages","template","params","chat","useJinja","jinja","tmpl","undefined","jsonSchema","response_format","JSON","stringify","tools","parallel_tool_calls","tool_choice","completionWithTools","callback","recursionCount","recursionLimit","completion","getSchemas","result","toolCalled","toolName","toolInput","toolOutput","assistantMessage","role","content","tool_calls","push","toolCallId","toolMessage","tool_call_id","nativeParams","prompt","emit_partial_completion","formattedResult","chat_template","chatTemplate","chat_format","grammar","grammar_lazy","grammar_triggers","preserved_tokens","additional_stops","stop","startTime","Date","now","firstTokenTime","deviceInfo","getDeviceInfo","wrappedCallback","data","tokenListener","tokenResult","Error","promise","then","completionResult","track","event","tok_per_sec","timings","predicted_per_second","toks_generated","predicted_n","ttft","remove","err","stopCompletion","tokenize","detokenize","tokens","embedding","embeddingResult","totalTime","mode","embedding_time","bench","pp","tg","pl","nr","modelDesc","modelSize","modelNParams","ppAvg","ppStd","tgAvg","tgStd","parse","applyLoraAdapters","loraList","loraAdapters","map","l","replace","scaled","removeLoraAdapters","getLoadedLoraAdapters","release","releaseContext","rewind","enabled","addNativeLogListener","splice","indexOf","setContextLimit","limit","contextIdCounter","contextIdRandom","process","env","NODE_ENV","Math","floor","random","modelInfoSkip","loadLlamaModelInfo","modelInfo","poolTypeMap","none","mean","cls","last","rank","initLlama","is_model_asset","isModelAsset","pooling_type","poolingType","lora","lora_list","rest","onProgress","loraPath","removeProgressListener","progress","poolType","modelDetails","androidLib","initContext","use_progress_callback","releaseAllLlama","releaseAllContexts","initMultimodal","mmprojPath","useGpu","isMultimodalEnabled","isMultimodalSupportVision","isMultimodalSupportAudio","releaseMultimodal","multimodalCompletion","mediaPaths","num_images","length","initVocoder","vocoderModelPath","isVocoderEnabled","getTTSType","getFormattedAudioCompletion","speakerJsonStr","textToSpeak","getAudioCompletionGuideTokens","decodeAudioTokens","releaseVocoder","CactusLM","CactusVLM","CactusTTS","CactusAgent"],"sourceRoot":"../../src","sources":["index.ts"],"mappings":"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","ignoreList":[]}
