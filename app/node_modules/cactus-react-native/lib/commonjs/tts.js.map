{"version":3,"names":["_index","require","TTSError","Error","constructor","message","code","contextId","name","exports","CactusTTS","isInitialized","isReleased","context","vocoderPath","init","vocoderModelPath","initVocoder","id","instance","ttsType","getTTSType","error","generate","textToSpeak","speaker","options","validateState","validateInputs","speakerConfig","JSON","stringify","config","startTime","Date","now","formatted_prompt","getFormattedAudioCompletion","tokenizeResult","tokenize","tokens","length","audioResult","decodeAudioTokens","endTime","metadata","duration","sampleRate","format","channels","isVocoderReady","isVocoderEnabled","getContextId","getVocoderPath","isReady","createSpeaker","trim","release","releaseVocoder"],"sourceRoot":"../../src","sources":["tts.ts"],"mappings":"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","ignoreList":[]}
